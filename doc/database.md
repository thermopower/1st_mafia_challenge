# 블로그 체험단 SaaS — 데이터플로우(요약)

본 문서는 `doc/userflow.md`에 명시된 데이터만을 바탕으로 한 데이터 관점의 간략한 플로우입니다.

## 1) 회원가입 및 역할 분기
- 입력: 이름, 전화번호, 이메일, 역할(인플루언서/광고주), 인증 방식(이메일/코드)
- 처리: 유효성 검증, Auth 계정 생성(Supabase), 최소 레코드 생성
- 출력: 인증 메일/코드 발송, 역할별 분기(인플루언서 정보 등록/광고주 정보 등록)

## 2) 인플루언서 정보 등록
- 입력: 생년월일, SNS 채널 유형, 채널 URL
- 처리: 날짜/URL 정규성 체크, 채널 검증 상태(pending/verified/failed) 관리
- 출력: 채널 상태(검증 대기/성공/실패)

## 3) 광고주 정보 등록
- 입력: 업체 위치, 카테고리, 사업자등록번호
- 처리: 형식/중복 검증(사업자등록번호 중복 차단), 검증 상태(pending/verified/failed)
- 출력: 검증 결과(성공/실패), 체험단 관리 권한 부여

## 4) 탐색 및 체험단 목록
- 입력: 검색, 필터/정렬 선택, 모집 중 체험단 카드 클릭
- 처리: 모집 중 캠페인 조회/정렬/필터, 배너 로드
- 출력: 모집 리스트/카드, 체험단 상세 페이지 이동

## 5) 체험단 상세
- 입력: 카드 클릭 상세 진입, 지원 버튼 클릭
- 처리: DB에서 모집정보 조회(기간, 혜택, 미션, 매장, 모집인원), 권한 체크(인플루언서 등록 완료 여부)
- 출력: 상세 표시, 지원 가능 버튼 노출, 근접 유사 카드

## 6) 체험단 지원
- 입력: 각오 한마디, 방문 예정일자, 제출
- 처리: 유효성 검증, DB에 applications 생성, 중복 지원 방지, 모집기간 유효 확인
- 출력: 제출 성공/실패 상태, 지원목록 업데이트, 감사 로그 기록

## 7) 지원목록 (인플루언서용)
- 입력: 메뉴에서 "지원목록" 접근, 상태 필터 선택
- 처리: 본인 지원목록 조회, 상태 필터 적용
- 출력: 신청완료/선정/반려 리스트, 상세 상태 표시

## 8) 광고주 체험단 관리
- 입력: "체험단 관리" 접근, 신규 체험단 등록(다이얼로그), 등록 정보 입력 후 제출
- 처리: 광고주 권한 검증, DB에 campaigns 생성(상태=모집중)
- 출력: 등록 성공, 목록 갱신

## 9) 광고주 체험단 상세 & 모집 관리
- 입력: 모집종료 버튼, 체험단 선정 버튼, 지원자 선택 후 제출
- 처리: DB 조회(지원자 리스트, 상태=모집중), 모집종료로 상태 전환, 선정된 지원자 상태=선정 처리
- 출력: 신청 현황 갱신, 모집 상태 변경, 인플루언서 측 상태 업데이트

